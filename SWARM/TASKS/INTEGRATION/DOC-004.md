# Task: DOC-004

## Metadata
| Field | Value |
|-------|-------|
| Lane | INTEGRATION |
| Type | DOC_SNIPPET |
| Wave | - |
| Status | PENDING |
| Created | 2026-01-15 |
| Assigned | - |

## Context Pack

### Files
- /home/ubuntu/projects/zerg-swarm/CLAUDE.md (target for new section)
- /home/ubuntu/projects/CLAUDE.md (reference - lines 17-20)

### Reference Material
Global RAG Brain Protocol from `/home/ubuntu/projects/CLAUDE.md` (lines 17-20):
```markdown
### RAG Brain Protocol
- On spawn: `mcp__rag-brain__recall` for prior context
- On complete: `mcp__rag-brain__remember` to store decisions
- Always: `mcp__rag-brain__feedback` on used memories
```

### Current State
The zerg-swarm CLAUDE.md documents:
- Agent Mail Protocol (lines 16-24)
- File Locking Protocol (lines 69-79)
- Task Card Format (lines 81-102)
- State Management (lines 104-115)

But **RAG Brain protocol is completely absent** from zerg-swarm documentation, despite being mandatory in the global context.

### Expected Behavior After Fix
1. New "### RAG Brain Protocol" section added to zerg-swarm CLAUDE.md
2. Section explains three core operations: recall, remember, feedback
3. Explains when each operation is used in zergling lifecycle (spawn, execute, complete)
4. Shows example MCP tool calls
5. Clarifies integration with Agent Mail Protocol
6. Fits naturally after Agent Mail Protocol section (around line 25-30)

## Objective
Document RAG Brain protocol in zerg-swarm CLAUDE.md to match global context and ensure agents understand memory management, knowledge recall, and feedback loops.

## Deliverables
- [ ] Add new "### RAG Brain Protocol" section to /home/ubuntu/projects/zerg-swarm/CLAUDE.md
- [ ] Explain `mcp__rag-brain__recall` operation (on spawn, for prior context)
- [ ] Explain `mcp__rag-brain__remember` operation (on complete, to store decisions)
- [ ] Explain `mcp__rag-brain__feedback` operation (on used memories, for learning)
- [ ] Show lifecycle integration: where each tool is called in zergling workflow
- [ ] Clarify relationship between Agent Mail Protocol and RAG Brain Protocol
- [ ] Provide example MCP tool call syntax for each operation

## Acceptance Criteria (INTEGRATION Gate)
- [ ] New section added after Agent Mail Protocol section
- [ ] All three RAG Brain operations documented with clear descriptions
- [ ] Lifecycle examples show when operations are called
- [ ] `grep -n "rag-brain" /home/ubuntu/projects/zerg-swarm/CLAUDE.md` returns 3+ matches
- [ ] Document follows existing CLAUDE.md markdown style and formatting
- [ ] No syntax errors in markdown
- [ ] Section logically integrates with existing protocols

## Check Command
```bash
# Verify RAG Brain protocol is documented in zerg-swarm CLAUDE.md
grep -n "rag-brain" /home/ubuntu/projects/zerg-swarm/CLAUDE.md && \
grep -n "RAG Brain" /home/ubuntu/projects/zerg-swarm/CLAUDE.md && \
echo "âœ“ RAG Brain section added to zerg-swarm CLAUDE.md"
```

## Constraints
- Max 80 lines of new content (fits DOC_SNIPPET type)
- Max 1 file (zerg-swarm CLAUDE.md only)
- No code changes, documentation only
- Must maintain consistency with existing document structure and tone
- Must not modify Agent Mail Protocol or other existing sections

## Notes
- **MEDIUM severity flaw**: RAG Brain protocol is described in global CLAUDE.md but not replicated in project-specific CLAUDE.md
- This doc fix ensures knowledge management (recall/remember) is visible to all agents
- RAG Brain works in parallel with Agent Mail Protocol - both are mandatory
- Context packs and memory feedback loops prevent knowledge loss across wave iterations
- Related issue: Without RAG Brain documentation, agents may not know how to leverage prior task context or share learnings

## Related Tasks
- INT-001: SWARM/LOCKS/ directory setup
- Agent Mail Protocol (primary coordination mechanism)
- State Management (STATE.json documentation)
