# Task: INT-007

## Metadata
| Field | Value |
|-------|-------|
| Lane | INTEGRATION |
| Type | ADD_PURE_FN |
| Wave | - |
| Status | PENDING |
| Created | 2026-01-15 |
| Assigned | - |

## Context Pack

### Current STATE.json Structure
```json
{
  "wave": 0,
  "active_zerglings": [],
  "completed_tasks": [],
  "pending_tasks": [...],
  "last_updated": "2026-01-15T20:15:00Z"
}
```

The `active_zerglings` field exists but is unused. No commands in swarm.py manage this list.

### Relevant swarm.py Code (Current Status Command)
```python
def cmd_status():
    state = load_state()
    print(f"=== SWARM STATUS ===\")
    print(f"Wave: {state['wave']}")
    print(f"Active Zerglings: {len(state.get('active_zerglings', []))}") # Shows count but can't modify
    print(f"Pending Tasks: {len(state.get('pending_tasks', []))}") 
    print(f"Completed Tasks: {len(state.get('completed_tasks', []))}") 
    print(f"Last Updated: {state.get('last_updated', 'N/A')}")
```

### Target Files
- /home/ubuntu/projects/zerg-swarm/SWARM/SCRIPTS/swarm.py

### Flaw Summary
MEDIUM: Missing active_zerglings management - STATE.json has field but no commands use it

## Objective
Implement pure functions to register and unregister active zerglings, and integrate them into the status command for visibility.

## Deliverables
- [ ] `cmd_register_zergling(name)` - adds zergling to active_zerglings list with timestamp
- [ ] `cmd_unregister_zergling(name)` - removes zergling from active_zerglings list
- [ ] Update `cmd_status()` to display active zerglings by name
- [ ] Add "register" and "unregister" commands to main CLI
- [ ] Create verification script to test zergling tracking

## Acceptance Criteria (INTEGRATION Gate)
- [ ] `swarm.py register testzergling-1` adds entry to STATE.json
- [ ] `swarm.py status` shows "Active Zerglings: 1" and lists the name
- [ ] `swarm.py unregister testzergling-1` removes entry
- [ ] STATE.json active_zerglings field contains valid entries with metadata
- [ ] Verify test: deploy and test with actual agent naming pattern

## Constraints
- Max 40 lines of new code
- Max 1 file modified (swarm.py)
- Must preserve existing state.json format
- Pure functions (no side effects outside state)

## Implementation Notes
- Consider storing zergling entry as dict: `{"name": "...", "registered_at": "...", "wave": ...}`
- Update load_state() default if needed
- Ensure proper error handling for duplicate registrations
- Test with agent naming convention: WAVE-N-AGENT-ID format

## Result
(filled by zergling)
