# Zerg Swarm Project Flaws Report

**Generated**: 2026-01-15
**Scanned by**: 4 Zerglings (ZERGLING-1 through ZERGLING-4)
**Status**: Complete

---

## Summary

| Category | Critical | High | Medium | Low |
|----------|----------|------|--------|-----|
| Code Quality | 4 | 5 | 5 | 0 |
| Documentation | 6 | 5 | 6 | 0 |
| Task Definitions | 5 | 8 | 4 | 2 |
| Architecture | 4 | 8 | 6 | 2 |
| **Total** | **19** | **26** | **21** | **4** |

---

## Code Quality Flaws (ZERGLING-1)

### CRITICAL

- **Missing file operations error handling** - No try-except around `json.load()`, `json.dump()`, `open()` operations. File I/O can fail due to permissions, corrupted JSON, disk full, concurrent access. (swarm.py:15-16, 20-21)

- **JSON parsing vulnerability** - No validation after `json.load(state)`. Corrupted or maliciously crafted STATE.json could cause crashes. (swarm.py:16)

- **Race condition on STATE.json** - Multiple agents can read/write STATE.json concurrently without file locking. Two overlords running `cmd_collect()` simultaneously can corrupt state. (swarm.py:18-21, 74-84)

- **Missing documented commands** - RUNBOOK.md references `swarm.py kill <task_id>`, `swarm.py reset`, and `swarm.py status --verbose` that don't exist. (swarm.py:87-97)

### HIGH

- **No file locking protocol integration** - swarm.py never checks if STATE.json is reserved before editing, violating project's own Agent Mail file locking rules. (swarm.py:18-21)

- **Incomplete state validation** - `load_state()` doesn't validate required keys exist or have correct types. Missing keys cause KeyErrors. (swarm.py:12-16)

- **Inconsistent error handling** - Some functions check directory existence, others assume directories exist. (swarm.py:12-21, 31-34)

- **Task ID collision risk** - `cmd_collect()` doesn't validate task ID format. Invalid files in INBOX would corrupt completed_tasks. (swarm.py:77-80)

- **Silent data loss** - Duplicate task_ids silently skipped in `cmd_collect()`. (swarm.py:76-84)

### MEDIUM

- **No atomic file operations** - `save_state()` writes JSON directly without temp file + rename. Crash mid-write corrupts STATE.json. (swarm.py:18-21)

- **State drift** - `pending_tasks` can desync from actual OUTBOX/TASKS files. No reconciliation. (STATE.json, swarm.py:23-53)

- **Missing active_zerglings management** - STATE.json has `active_zerglings` field but no commands use it. (swarm.py:27, STATE.json:3)

- **No logging** - Script performs state mutations with no audit trail. (swarm.py:1-100)

- **Hardcoded file patterns** - Uses hardcoded "*.md" glob. Other extensions invisible. (swarm.py:31-33, 46, 58, 70)

---

## Documentation Flaws (ZERGLING-2)

### CRITICAL

- **Directory structure mismatch** - README.md references `tasks/`, `agents/`, `output/` directories that don't exist. (README.md:16-22)

- **Missing INBOX/OUTBOX directories** - Extensively documented but don't exist in project.

- **Missing ARCHIVE directory** - Referenced in SWARM_RULES.md but doesn't exist. (SWARM_RULES.md:62)

- **Missing LOCKS directory** - Documented in CLAUDE.md but doesn't exist. (CLAUDE.md:155)

- **Contradictory STATE.json structures** - CLAUDE.md and OVERLORD.md document different schemas. (CLAUDE.md:112-119 vs OVERLORD.md:58-76)

- **Task format inconsistency** - CLAUDE.md says tasks in `/SWARM/TASKS/`, OVERLORD.md says `.json` format, actual files are `.md`. (CLAUDE.md:80, OVERLORD.md:27)

### HIGH

- **Missing swarm.py commands** - RUNBOOK.md references `kill`, `reset`, `--verbose` that don't exist. (RUNBOOK.md:102-115)

- **Message prefix inconsistency** - Project CLAUDE.md uses `[PARTIAL] [FAILED]`, global uses `[HANDOFF] [QUESTION]`. (CLAUDE.md:28)

- **Task naming mismatch** - RUNBOOK.md shows `T<NNN>.md`, actual files use `K001.md`, `M001.md` prefixes. (RUNBOOK.md:88-97)

- **Agent registration contradiction** - README.md says Agent Mail mandatory, ZERGLING.md says optional. (README.md:56, ZERGLING.md:25)

- **Missing Acceptance Criteria field** - GATES.md references it but CLAUDE.md Task Card Format doesn't include it. (GATES.md:86, CLAUDE.md:78-104)

### MEDIUM

- **RAG Brain protocol undocumented** - Global CLAUDE.md describes it, SWARM docs don't mention it.

- **RESULTS vs INBOX naming conflict** - OVERLORD.md uses RESULTS/, other docs use INBOX/. (OVERLORD.md:43)

- **Fake generation claim** - README.md claims "Generated by ZERGLING-1" but appears manual. (README.md:62)

- **STATE.json path wrong** - OVERLORD.md says `/zerg-swarm/STATE.json`, actual is `/zerg-swarm/SWARM/STATE.json`. (OVERLORD.md:55)

- **INTEGRATION lane empty** - Has README.md but no task files like other lanes.

- **README_PARTS undocumented** - 6 markdown parts exist but not mentioned in structure docs.

---

## Task Definition Flaws (ZERGLING-3)

### CRITICAL

- **Missing Created timestamp** - All 12 lane tasks (K001-K003, M001-M003, Q001-Q003, D001-D003) lack required timestamp. (TASK_TEMPLATE.md:10)

- **Missing Assigned field** - All 12 lane tasks missing metadata field. (TASK_TEMPLATE.md:11)

- **Invalid Wave field** - All tasks use "-" instead of number/empty. (TASK_TEMPLATE.md:8)

- **T001.md missing Lane/Type** - Required fields not present. (SWARM_RULES.md:186-191)

- **Duplicate conflicting templates** - `/SWARM/TASKS/TEMPLATE.md` and `/SWARM/TEMPLATES/TASK_TEMPLATE.md` use different formats.

### HIGH

- **Missing Deliverables section** - All 12 lane tasks lack checkbox deliverables. (TASK_TEMPLATE.md:46)

- **Missing Constraints section** - All 12 lane tasks lack max lines/files constraints. (TASK_TEMPLATE.md:72-76)

- **Missing surrounding code in Context Pack** - K001-K003, M001-M003, Q001-Q003, D001-D003 all missing required 10-40 lines of context. (SWARM_RULES.md:211)

### MEDIUM

- **TEMPLATE.md includes all lane gates** - Should instruct to select one lane only. (TASK_TEMPLATE.md:48-71)

- **T001.md uses old format** - Bullet metadata instead of table.

- **EXAMPLE-001.md uses old format** - Inconsistent with current template.

- **Missing gate check checkboxes** - Acceptance Criteria incomplete per GATES.md.

### LOW

- **Missing Notes section** - Optional but good practice. (TASK_TEMPLATE.md:78)

- **Date format inconsistent** - T001.md uses "2026-01-15", EXAMPLE uses ISO with time.

---

## Architecture/Design Flaws (ZERGLING-4)

### CRITICAL

- **Missing INBOX directory** - Core to task flow, referenced everywhere, doesn't exist.

- **Missing OUTBOX directory** - Core to task assignment, referenced everywhere, doesn't exist.

- **Missing LOCKS directory** - Required for file locking, documented, doesn't exist.

- **README.md vs actual structure mismatch** - Documents `tasks/`, `agents/`, `output/` but actual has `SWARM/TASKS/`, no `agents/`, no `output/`.

### HIGH

- **Missing ARCHIVE directory** - Documented for completed tasks, doesn't exist. (SWARM_RULES.md:62, 106)

- **Missing RESULTS directory** - OVERLORD.md references it, conflicts with INBOX pattern. (OVERLORD.md:43, 86)

- **STATE.json location inconsistency** - Docs say root, actual is in SWARM/. (OVERLORD.md:55)

- **STATE.json schema mismatch** - Documented schema has `active_wave`, `waves`, `file_reservations` but actual has simpler flat structure.

- **Dual task location pattern** - Tasks can be in OUTBOX/ and TASKS/, unclear when to use which. (CLAUDE.md:292)

- **Two conflicting lock mechanisms** - Lock files in LOCKS/ AND agent_mail reservations. (SWARM_RULES.md:104, 112-113)

- **Missing agents/ directory** - Documented for agent spawning, doesn't exist. (README.md:21)

- **Missing output/ directory** - Documented for artifacts, doesn't exist. (README.md:22, 33)

### MEDIUM

- **SCRIPTS/ only has swarm.py** - Plural implies more, only one script.

- **INTEGRATION lane empty** - Has directory and README but no tasks.

- **No wave management tooling** - swarm.py only increments counter, no spawn/monitor commands.

- **README_PARTS orphaned** - Build scripts for assembling README not found.

- **No file_reservations in STATE.json** - Required by OVERLORD.md, not implemented.

- **Pending tasks path ambiguity** - STATE uses "KERNEL/K001" but files at "SWARM/TASKS/KERNEL/K001.md".

### LOW

- **T001.md at TASKS/ root** - Violates lane organization pattern. (SWARM_RULES.md:149)

- **EXAMPLE-001.md naming** - Different from documented T{NNN}.md pattern. (SWARM_RULES.md:102)

---

## Priority Recommendations

### Immediate (Critical)

1. Create missing directories: `INBOX/`, `OUTBOX/`, `LOCKS/`, `ARCHIVE/`
2. Add error handling to swarm.py
3. Implement file locking in swarm.py
4. Reconcile STATE.json schema between docs and implementation
5. Unify directory structure documentation

### Short-term (High)

1. Add missing swarm.py commands (`kill`, `reset`, `--verbose`)
2. Update all task cards with required fields
3. Consolidate template files (pick one, delete other)
4. Add Context Packs with surrounding code to all tasks
5. Implement active_zerglings tracking

### Medium-term

1. Add logging to swarm.py
2. Create atomic file operations
3. Add state reconciliation between files and STATE.json
4. Document README_PARTS build process
5. Populate INTEGRATION lane with tasks

---

*Report compiled by OVERLORD from 4 parallel ZERGLING scans*
